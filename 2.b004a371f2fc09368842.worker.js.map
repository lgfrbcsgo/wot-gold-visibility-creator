{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../../src/comlink.ts","webpack:///./src/polyfills.ts","webpack:///./src/worker/worker.ts"],"names":["self","chunkIds","moreModules","moduleId","modules","length","installedChunks","pop","installedModules","2","installedWasmModules","wasmImportObjects","./gold_visibility_creator_wasm.js","__wbg_new_59cb74e423758ede","exports","__wbg_stack_558ba5917b466edd","p0i32","p1i32","__wbg_error_4bb6c2a97407129a","__wbindgen_object_drop_ref","__wbindgen_throw","__webpack_require__","module","i","l","call","e","chunkId","promises","push","Promise","resolve","then","importScripts","1","forEach","wasmModuleId","installedWasmModuleData","promise","importObject","req","fetch","p","WebAssembly","compileStreaming","all","items","instantiate","instantiateStreaming","x","arrayBuffer","bytes","res","w","instance","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","s","proxyMarker","createEndpoint","throwSet","WeakSet","transferHandlers","Map","canHandle","obj","[object Object]","port1","port2","MessageChannel","expose","deserialize","port","start","ep","createProxy","path","proxy","Proxy","Function","_target","prop","requestResponseMessage","type","map","toString","fromWireValue","rawValue","transferables","toWireValue","_thisArg","rawArgumentList","last","slice","argumentList","processArguments","wrap","has","isError","Error","serialized","message","stack","assign","addEventListener","async","ev","data","id","_objectSpread","returnValue","parent","reduce","apply","transfer","console","warn","add","wireValue","postMessage","processed","v","arr","Array","concat","transferCache","WeakMap","transfers","set","handler","serializedValue","serialize","msg","fill","Math","floor","random","Number","MAX_SAFE_INTEGER","join","removeEventListener","for","imageData","color","TextEncoder","TextDecoder","polyfillTextEncoder","red","green","blue","alpha","Uint8Array","height","width","buffer"],"mappings":"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","file":"2.b004a371f2fc09368842.worker.js","sourcesContent":[" \tself[\"webpackChunk\"] = function webpackChunkCallback(chunkIds, moreModules) {\n \t\tfor(var moduleId in moreModules) {\n \t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t}\n \t\twhile(chunkIds.length)\n \t\t\tinstalledChunks[chunkIds.pop()] = 1;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"1\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t2: 1\n \t};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \tfunction promiseResolve() { return Promise.resolve(); }\n\n \tvar wasmImportObjects = {\n \t\t2: function() {\n \t\t\treturn {\n \t\t\t\t\"./gold_visibility_creator_wasm.js\": {\n \t\t\t\t\t\"__wbg_new_59cb74e423758ede\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbg_new_59cb74e423758ede\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_stack_558ba5917b466edd\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbg_stack_558ba5917b466edd\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_error_4bb6c2a97407129a\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbg_error_4bb6c2a97407129a\"](p0i32,p1i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_object_drop_ref\": function(p0i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbindgen_object_drop_ref\"](p0i32);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_throw\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbindgen_throw\"](p0i32,p1i32);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t};\n \t\t},\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n \t\tpromises.push(Promise.resolve().then(function() {\n \t\t\t// \"1\" is the signal for \"already loaded\"\n \t\t\tif(!installedChunks[chunkId]) {\n \t\t\t\timportScripts(\"\" + ({}[chunkId]||chunkId) + \".\" + \"b004a371f2fc09368842\" + \".worker.js\");\n \t\t\t}\n \t\t}));\n\n \t\t// Fetch + compile chunk loading for webassembly\n\n \t\tvar wasmModules = {\"1\":[2]}[chunkId] || [];\n\n \t\twasmModules.forEach(function(wasmModuleId) {\n \t\t\tvar installedWasmModuleData = installedWasmModules[wasmModuleId];\n\n \t\t\t// a Promise means \"currently loading\" or \"already loaded\".\n \t\t\tif(installedWasmModuleData)\n \t\t\t\tpromises.push(installedWasmModuleData);\n \t\t\telse {\n \t\t\t\tvar importObject = wasmImportObjects[wasmModuleId]();\n \t\t\t\tvar req = fetch(__webpack_require__.p + \"\" + {\"2\":\"87d8b50c0854636923a5\"}[wasmModuleId] + \".module.wasm\");\n \t\t\t\tvar promise;\n \t\t\t\tif(importObject instanceof Promise && typeof WebAssembly.compileStreaming === 'function') {\n \t\t\t\t\tpromise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(items[0], items[1]);\n \t\t\t\t\t});\n \t\t\t\t} else if(typeof WebAssembly.instantiateStreaming === 'function') {\n \t\t\t\t\tpromise = WebAssembly.instantiateStreaming(req, importObject);\n \t\t\t\t} else {\n \t\t\t\t\tvar bytesPromise = req.then(function(x) { return x.arrayBuffer(); });\n \t\t\t\t\tpromise = bytesPromise.then(function(bytes) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(bytes, importObject);\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t\tpromises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {\n \t\t\t\t\treturn __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;\n \t\t\t\t}));\n \t\t\t}\n \t\t});\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/wot-gold-visibility-creator/\";\n\n \t// object with all WebAssembly.instance exports\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  Message,\n  MessageType,\n  WireValue,\n  WireValueType\n} from \"./protocol.js\";\nexport { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nconst throwSet = new WeakSet();\n\n// prettier-ignore\ntype Promisify<T> = T extends { [proxyMarker]: boolean }\n  ? Promise<Remote<T>>\n  : T extends Promise<any>\n    ? T\n    : T extends (...args: infer R1) => infer R2\n      ? (...args: R1) => Promisify<R2>\n      : Promise<T>;\n\n// prettier-ignore\nexport type Remote<T> =\n  (\n    T extends (...args: infer R1) => infer R2\n      ? (...args: R1) => Promisify<R2>\n      : { [K in keyof T]: Promisify<T[K]> }\n  ) & (\n    T extends { new (...args: infer R1): infer R2 }\n      ? { new (...args: R1): Promise<Remote<R2>> }\n      : unknown\n  );\n\nexport interface TransferHandler {\n  canHandle(obj: any): boolean;\n  serialize(obj: any): [any, any[]];\n  deserialize(obj: any): any;\n}\n\nexport const transferHandlers = new Map<string, TransferHandler>([\n  [\n    \"proxy\",\n    {\n      canHandle: obj => obj && obj[proxyMarker],\n      serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n      },\n      deserialize: (port: MessagePort) => {\n        port.start();\n        return wrap(port);\n      }\n    }\n  ],\n  [\n    \"throw\",\n    {\n      canHandle: obj => throwSet.has(obj),\n      serialize(obj) {\n        const isError = obj instanceof Error;\n        let serialized = obj;\n        if (isError) {\n          serialized = {\n            isError,\n            message: obj.message,\n            stack: obj.stack\n          };\n        }\n        return [serialized, []];\n      },\n      deserialize(obj) {\n        if ((obj as any).isError) {\n          throw Object.assign(new Error(), obj);\n        }\n        throw obj;\n      }\n    }\n  ]\n]);\n\nexport function expose(obj: any, ep: Endpoint = self as any) {\n  ep.addEventListener(\"message\", (async (ev: MessageEvent) => {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message)\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = await rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = await rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = await new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        default:\n          console.warn(\"Unrecognized message\", ev.data);\n      }\n    } catch (e) {\n      returnValue = e;\n      throwSet.add(e);\n    }\n    const [wireValue, transferables] = toWireValue(returnValue);\n    ep.postMessage({ ...wireValue, id }, transferables);\n  }) as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nexport function wrap<T>(ep: Endpoint): Remote<T> {\n  return createProxy<T>(ep) as any;\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  path: (string | number | symbol)[] = []\n): Remote<T> {\n  const proxy: Function = new Proxy(new Function(), {\n    get(_target, prop) {\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, {\n          type: MessageType.GET,\n          path: path.map(p => p.toString())\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map(p => p.toString()),\n          value\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: MessageType.ENDPOINT\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didn’t happen.\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.APPLY,\n          path: path.map(p => p.toString()),\n          argumentList\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map(p => p.toString()),\n          argumentList\n        },\n        transferables\n      ).then(fromWireValue);\n    }\n  });\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], any[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map(v => v[0]), myFlat(processed.map(v => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, any[]>();\nexport function transfer(obj: any, transfers: any[]) {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T>(obj: T): T & { [proxyMarker]: true } {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(w: Window, context = self): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: any[]) =>\n      w.postMessage(msg, \"*\", transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context)\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, any[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue\n        },\n        transferables\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value\n    },\n    transferCache.get(value) || []\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  msg: Message,\n  transfers?: any[]\n): Promise<WireValue> {\n  return new Promise(resolve => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev: MessageEvent) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l as any);\n      resolve(ev.data);\n    } as any);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n  });\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n","if (!Symbol[\"asyncIterator\"]) {\n    (Symbol as any)[\"asyncIterator\"] = Symbol.for(\"asyncIterator\");\n}\n\nexport async function polyfillTextEncoder() {\n    if (!self.TextEncoder || !self.TextDecoder) {\n        const {TextEncoder, TextDecoder} = await import('text-encoding');\n        self.TextEncoder = self.TextEncoder || TextEncoder;\n        self.TextDecoder = self.TextDecoder || TextDecoder;\n    }\n}","import {expose, transfer} from 'comlink';\nimport {TextureCreator} from './types';\nimport {polyfillTextEncoder} from '../polyfills';\n\nconst createTexture: TextureCreator = async (imageData, color) => {\n    await polyfillTextEncoder();\n    const { create } = await import('./wasm/pkg');\n\n    const data = create(\n        color.red, color.green, color.blue, color.alpha,\n        new Uint8Array(imageData.data), imageData.height, imageData.width\n    );\n\n    return transfer(data, [data.buffer]);\n};\n\nexpose(createTexture);\n"],"sourceRoot":""}